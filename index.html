<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="./img/favicon.ico">
        <title>Yet Another MQTT Demo</title>
        <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="./css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="./js/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/highlight.pack.js"></script> 
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href=".">Yet Another MQTT Demo</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href=".">General Information</a>
                    </li>
                    <li >
                        <a href="door/">Door Bell</a>
                    </li>
                    <li >
                        <a href="firmware/">Updating Firmware</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li class="disabled">
                        <a rel="next" >
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="door/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#mqtt-d1-mini-led-matrix-display">MQTT D1 Mini LED Matrix Display</a></li>
            <li><a href="#installation">Installation</a></li>
            <li><a href="#things-to-do">Things To Do</a></li>
            <li><a href="#usage">Usage</a></li>
            <li><a href="#contributing">Contributing</a></li>
            <li><a href="#support-me">Support Me</a></li>
            <li><a href="#other-projects">Other Projects</a></li>
            <li><a href="#credits">Credits</a></li>
            <li><a href="#license">License</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><img alt="MQTT D1 Mini LED Matrix Display" src="./pictures/1.jpg" /></p>
<h1 id="mqtt-d1-mini-led-matrix-display">MQTT D1 Mini LED Matrix Display</h1>
<p>June 2019 LeRoy Miller  </p>
<pre><code>The original sketch was found here:  
Smarte Display Box by Notagenius  
https://www.thingiverse.com/thing:3369864/files  
Which uses a single LED Matrix board, and a ESP8266 (D1 Mini)  
I was looking for a box that would hold the D1 Mini, and the Wemos  
LED Matrix shield, which is a small 8x8 matrix that sits on top of  
the D1 Mini.  The Box didn't work for my needs, but I found the sketch
would.

I modified it to use a 32x8 LED Matrix, using google translate  
translated it to mostly English, Added the WiFiManager so that it  
is easy to move to different locations.  
Added Over the Air updates, and a configuration file saved in SPIFFS  
also added a smile, and sad face, and change how the image is displayed   
slightly, also added a NTP Clock.   
Most of these are from the examples in provided by the ESP8266 board core.

I found this case that works for the 32x8 Matrix and D1 Mini  
https://www.thingiverse.com/thing:2867294  
Mine printed a little small, and I needed to sand the LED Matrix to get it to  
fit, but it's a tight fit, and shouldn't cause a problem.

Information on setting up SPIFFS can be found here:  
https://www.youtube.com/watch?v=jIOTzaeh7fs  
https://github.com/esp8266/arduino-esp8266fs-plugin/releases

The only line that needs changed in the sketch is for the TIMEOFFSET  
currently set for Eastern time zone, United State.  
Setup your config.json file, upload using the information found in the   
SPIFFS tutorial above.  
Then upload the sketch to your D1 Mini with a flash size of 4m(3m spiffs)  
which should be more than needed.  
Once it's uploaded, you should be able to upload a new config.json and   
new firmware over the air as/if needed.
</code></pre>
<h2 id="installation">Installation</h2>
<p>You can find the source code for this project here:<br />
<a href="https://github.com/automation-technology-club/Yet-Another-MQTT-Demo/tree/master">Project source code</a></p>
<h2 id="things-to-do">Things To Do</h2>
<p>TIMEOFFSET needs to be moved to the config.json file.<br />
<strong> SSID, and Password could also be moved to config.json file and WifiManager could be replaced with a more traditional way to connect to the internet. No plans to do this on my part. </strong><br />
Sketch sets up a website, but contains no contain, and isn't used, this could change.  </p>
<h2 id="usage">Usage</h2>
<p>Connects to a MQTT of your choice (see config.json file in the data directory),
and sends status updates to the topic:<br />
"tele/{mqttname}/POWER"<br />
it subscribes to the topics:<br />
"cmnd/{mqttname}/MESSAGE" used to display messages on the screen.
"cmnd/{mqttname}/IMAGE" used to display simple images or images and messages<br />
        The format for sending a image and a message is:<br />
            "imagename,this is a message"<br />
"cmnd/{mqttname}/IMAGE_RAW" which is used to set a binary string to display a image that isn't already in the sketch.<br />
    example: mosquitto_pub -h broker.hivemq.com -t "cmnd/{mqttname}/IMAGE_RAW" -m "0011110001000010101001011000000110100101100110010100001000111100"<br />
IMAGE Names:
"home", "bell", "fire", "mail", "wash", "yes", "no", "smile", "sad"<br />
    example: mosquitto_pub -h broker.hivemq.com -t "cmnd/{mqttname}/IMAGE" -m "mail"<br />
    or mosquitto_pub -h broker.hivemq.com -t "cmnd/LeRoy/IMAGE" -m "mail,Package at front door"  </p>
<h2 id="contributing">Contributing</h2>
<ol>
<li>Fork it!</li>
<li>Create your feature branch: <code>git checkout -b my-new-feature</code></li>
<li>Commit your changes: <code>git commit -am 'Add some feature'</code></li>
<li>Push to the branch: <code>git push origin my-new-feature</code></li>
<li>Submit a pull request</li>
</ol>
<h2 id="support-me">Support Me</h2>
<p>If you find this or any of my projects useful or enjoyable please support me.<br />
Anything I do get goes to buy more parts and make more/better projects.<br />
https://www.patreon.com/kd8bxp<br />
https://ko-fi.com/lfmiller<br />
https://www.paypal.me/KD8BXP  </p>
<h2 id="other-projects">Other Projects</h2>
<p>https://www.youtube.com/channel/UCP6Vh4hfyJF288MTaRAF36w<br />
https://kd8bxp.blogspot.com/  </p>
<h2 id="credits">Credits</h2>
<p>Smarte Display Box by Notagenius and others (esp8266 examples)<br />
I'm only taking credit for expanding on this sketch, not for the sketch.  </p>
<h2 id="license">License</h2>
<p>This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.</p>
<pre><code>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see &lt;http://www.gnu.org/licenses&gt;
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '.';</script>
        <script data-main="./mkdocs/js/search.js" src="./mkdocs/js/require.js"></script>
        <script src="./js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 0.16.3
Build Date UTC : 2019-06-13 13:14:14
-->
